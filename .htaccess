RewriteEngine On

# Redirection HTTP vers HTTPS
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Définir les types MIME pour les fichiers CSS
<IfModule mod_mime.c>
    AddType text/css .css
</IfModule>

# S'assurer que les fichiers statiques existants sont servis directement
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

# Ajouter .php aux URLs sans extension ni slash à la fin
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !\.
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^([^/]+)$ $1.php [NC,L]

# Pour tout le reste, rediriger vers index.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L]